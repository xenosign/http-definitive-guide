# 08. 통합점 : 게이트웨이, 터널, 릴레이

- 게이트웨이 : 서로 다른 프로토콜과 애플리케이션 간의 HTTP 인터페이스
- 애플리케이션 인터페이스 : 서로 다른 형식의 웹 애플리케이션이 통신하는데 사용
- 터널 : HTTP 커넥션을 통해서 HTTP 가 아닌 트래픽을 전송하는데 사용
- 릴레이 : 일종의 단순한 HTTP 프락시로, 한 번에 한 개의 홉에 데이터를 전달하는데 사용

## 8.1 게이트웨이

- HTTP 확장과 인터페이스의 발전으로, 웹에 더 복잡한 리소스를 올려야 할 필요가 생기면서 하나의 어플리케이션으로는 모든 요청을 처리할 수 없는 한계가 발생
- 이에 대한 해결책으로 인터프리터와 같이 리소스를 받기 위한 경로 안내를 하는 게이트웨이를 고안
- 게이트웨이는 HTTP 트래픽을 다른 프로토콜로 자동 변환하여, HTTP 클라이언트가 아무런 준비 없이 다른 프로토콜을 사용하는 서버(동적 컨텐츠 생성, 데이터 베이스 등)에 접속할 수 있도록 한다

![img.png](images/08_Integration_Point_01.png)

### 8.1.1 클라이언트 측 게이트웨이와 서버 측 게이트웨이

- 웹 게이트웨이는 한쪽은 HTTP, 다른 한쪽은 HTTP 가 아닌 다른 프로토콜로 통신. 게이트웨이는 상이한 프로토콜을 ` 빗금(/)` 으로 구분하여 기술
- ex) HTTP/FTP

## 8.2 프로토콜 게이트웨이

- 프락시로 바로 HTTP 트래픽을 보내는 것과 같이 게이트웨이로도 HTTP 트래픽을 바로 보낼 수 있다
- 보통은 브라우저에서 명시적으로 게이트웨이를 설정하거나, 게이트웨이를 대리 서버(리버스 프락시)로 설정이 가능

![img.png](images/08_Integration_Point_02.png)

- 일반 HTTP 트래픽은 바로 웹 서버로 전달하고, 특정 URL 요청은 HTTP/FTP 게이트웨이로 전달하는 그림

### 8.2.1 HTTP/*: 서버 측 웹 게이트웨이

- 서버 측 웹 게이트웨이는 클라이언트로 부터의 HTTP 요청이 원 서버로 들어오는 시점에 요청을 다른 프로토콜로 전환하여 요청을 처리한다
- 다른 프로토콜을 통해 처리 된 객체를 게이트웨이로 받아서 HTTP 응답에 실어서 클라이언트로 전송한다

### 8.2.2 HTTP/HTTPS: 서버 측 보안 게이트웨이

- 모든 웹 요청을 암호화하여 개인 정보 보호 및 보안을 제공하는 용도로 게이트 활용이 가능

![img.png](images/08_Integration_Point_03.png)

### 8.2.3 HTTPS/HTTP: 클라이언트 측 보안 가속 게이트웨이

- 클라이언트 측에서 요청을 암호화 하여 게이트웨이에 전달하고, 게이트웨이는 이를 복호화 하여 서버와 통신
- 원 서버와 게이트웨이 통신은 암호화가 되지 않은 트래픽 전송이 일어나므로 게이트웨이와 원 서버 간의 네트워크가 안전한지 확실히 확인 후 사용이 필요

> 해당 부분에서 서브넷을 활용하여 외부 서버(리버스 프록시)는 퍼블릭 서브넷에 위치 시키고, 실제 서버는 프라이빗 서브넷에 위치시켜서 통신하면 안전한 3-Tier-Architecture 구성이 가능
> - 퍼블릭과 프라이빗 서브넷 통신은 HTTP 로 이루어지지만, 외부에서는 프라이빗 서브넷에 있는 서버의 위치와 존재 자체를 모르기 때문에 공격이 어렵고 한다고 해도 AWS 의 방화벽에 의해 막힐 가능성이 높음

## 8.3 리소스 게이트웨이
