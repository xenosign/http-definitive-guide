# 15. 엔터티와 인코딩

- HTTP 는 메시지를 올바르게 수성, 식별, 추출, 처리 되는 것을 보장하기 위해 잘 라벨링된 엔터티를 사용하며 이번 장에서는 아래의 내용을 다룬다
- HTTP 데이터를 담는 컨테이너인 HTTP 메시지 엔터티의 포맷과 동작 방식
- 어떻게 HTTP 가 엔터티 본문의 크기를 기술하며, 크기를 측정하기 위해 HTTP 가 무엇을 요구하는지
- 클라이언트가 콘텐츠를 바르게 처리할 수 있도록 제공되는 엔터티 헤더들
- 공간을 적제 차지하고 더 안전하게 만들기 위해 발송자가 콘텐츠 데이터 포맷을 변형할 때 사용하는, 디코딩 가능한 인코딩
- 특정 종류의 콘텐츠의 송수신을 개선하기 위해 HTTP 가 데이터를 실어 나르는 방식을 수정하는 전송 인코딩, 그 중에서도 콘텐츠의 안정적 전송을 위해 쪼개서 전당하는 청크 인코딩
- 클라이언트가 요청한 콘텐츠의 최신 버전을 가져올 수 있도록 도와주는 태그, 라벨, 시간, 체크섬의 모음
- 콘텐츠의 버전 번호처럼 동작하는 검사기들과 객체를 최신으로 유지하기 위해 설계된 HTTP 헤더 필드들
- 중단 되었던 다운로드를 중단된 지점에서부터 재개하고자 할 때 유용한 범위 요청
- 클라리언트가 전에 본 적이 있었던 웹 페이지를 다시 볼 때, 그 때 이후로 변경이 있는 부분만 요청할 수 있게 해주는 HTTP 델타 인코딩 확장
- 엔터티 콘텐츠가 프락시를 지나는 과정에서 변경된 곳이 있지 않은지 탐지하기 위해 사용하는, 엔터티 본문의 체크섬

## 15.1 메시지는 컨테이터, 언터티는 화물

- HTTP 메시지를 인터넷 운송 시스템의 컨테이너라고 생각한다면, HTTP 엔터티는 메시지의 실질적 화물
- HTTP/1.1 은 다음과 같이 10가지 주요 엔터티 헤더 필드를 정의
  - Content-Type : 객체의 종류
  - Content-Length : 메시지의 길이나 크기
  - Content-Language : 객체와 잘 대응되는 자연어
  - Content-Encoding : 객체에 대해 행해진 변형
  - Content-Location : 요청 시점을 기준, 객체의 또 다른 위치
  - Content-Range : 엔터티가 어떤 엔터티의 부분이라면, 전체 부분에서 어느 부분에 해당하는지
  - Content-Md5 : 엔터티 본문 콘텐츠에 대한 체크섬
  - Last-Modified : 서버에서 콘텐츠가 생성 혹은 마지막으로 수정 된 날
  - Expries : 엔터티 데이터가 신선하지 않다고 간주되기 시작하는 날짜와 시각
  - Allow : 리소스에 대해 허용되는 메서드
  - ETag : 이 객체의 버전에 대한 고유한 검사기
  - Cache-Control : 이 문서가 어떻게 캐시 될 수 있는지에 대한 지시자

> ETag 추가 설명
> - 스펙 상 ETag 는 `강한 검사기(strong ETag)` 와 `약한 검사기(weak ETag, W/"..." 형태)` 로 나뉘며, 전자는 바이트 단위로 동일할 때만 같다고 보고, 후자는 의미상 동등할 때 같다고 처리

### 15.1.1 엔터티 본문

- 엔터티 본문은 가공되지 않은 데이터만을 담고 있기에, 엔터티 헤더에는 데이터의 의미에 대해 설명이 필요
- 엔터티 본문은 헤더 필드이 끝을 의미하는 빈 줄(CRLF) 다음 부터 시작

![img.png](images/15_entity_encoding_01.png)

