# 11. 클라이언트 식별과 쿠키

- 서버가 통신하는 대상을 식별하는 데 사용하는 기술 알아보기

## 11.1 개별 접촉

- HTTP 는 익명으로 사용하고 STATELESS 하지만, 현대의 웹 사이트들은 개인화된 서비스를 제공하기 위해 사용자의 브라우징 내역을 기록

#### 개별 인사

- 쇼핑이 개인에게 맞춰져 있는 것처럼 느끼게 하기 위해 특화된 환영 메시지나 페이지 내용을 제공

#### 사용자 맞춤 추천

#### 저장된 사용자 정보

- 쇼핑에 필요한 개인 정보를 저장하여 편리한 사용을 도움

#### 세션 추적

- HTTP 트랜잭션은 상태가 없으므로, 사이트는 사용자와의 상호작용을 위해 사용자의 상태(장바구니 등)를 남긴다

#### 사용자 식별 기술

- 사용자 식별 관련 정보를 전달하는 HTTP 헤더들
- 클라이언트 IP 주소 추적으로 사용자를 식별
- 사용자 로그인 인증을 통한 사용자 식별
- URL 에 식별자를 포함하여 전달하는 뚱뚱한 URL
- 식별 정보를 유지하는 쿠키

## 11.2 HTTP 헤더

![img.png](images/11_client_distinction_cookie_01.png)

## 11.3 클라이언트 IP 주소

- 초기 웹은 사용자 식별에 클라이언트의 IP 주소를 사용하려 시도하였으나 다양한 약점을 보유
- IP 주소를 통한 사용자 식별 방식의 약점
  - IP 는 사용자가 아닌 컴퓨터를 가르키므로 명확한 사용자 식별이 불가능
  - 동적 IP 할당으로 인한 기술적인 한계
  - 방화벽에 의한 실제 IP 주소 추적의 어려움
  - 프락시 혹은 게이트웨이 사용 시, 서버는 프락시와 게이트웨이의 IP 주소를 알 수 밖에 없는 문제

## 11.4 사용자 로그인

- 사용자에게 로그인을 요구하여 사용자를 명시적으로 식별
- 다만 사용자에게 액션이 요구되는 만큼 로그인을 안한 사용자에 대한 식별이 불가능

![img.png](images/11_client_distinction_cookie_02.png)

## 11.5 뚱뚱한 URL

- 특정 웹사이트의 경우 사용자의 URL 마다 버전을 기술하여 사용자를 식별하고 추적
- 사용자가 웹 사이트에 처음 방문하면 사용자 식별을 위한 유일한 ID 가 생성되고, 해당 값을 서버가 URL 에 추가하여 클라이언트를 리다이랙트 시키는 방식으로 사용

![img.png](images/11_client_distinction_cookie_03.png)

- 뚱뚱한 URL 의 문제점
  - 못생긴 URL : 사용자에게 혼란 제공
  - 공유하지 못하는 URL : URL 에 사용자 및 세션 상태 정보가 들어가므로 문제 발생
  - 캐시 사용 불가능 : 사용자 및 세션 상태에 따라 URL 이 달라지므로 캐시 사용이 불가능
  - 서버 부하 가중 : 사용자 별로 뚱뚱한 URL 이 포함된 페이지를 다시 그려야 하는 문제
  - 이탈 : 뚱뚱항ㄴ URL 에서 이탈하게 되면 이전의 추적 상태를 전부 잃게 되는 문제
  - 세션 간 지속성 부재 : 사용자가 URL 를 북마킹 하지 않고 로그아웃 하면 모든 정보를 읽게 됨


