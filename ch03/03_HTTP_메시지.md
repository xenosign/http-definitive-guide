# 03. HTTP 메시지

- 메시지가 어떻게 흘러가는가
- HTTP 메시지의 세 부분(시작줄, 헤더, 개체 본문)
- 요처과 응답 메시지의 차이
- 요청 메시지가 지원하는 여러 기능(메서드)들
- 응답 메시지가 반환하는 여러 상태 코드들
- 여러 HTTP 헤더들은 무슨일을 하는가

## 3.1 메시지의 흐름

- HTTP 메시지는 HTTP 어플리케이션 간에 주고받은 데이터의 블록

### 3.1.1 메시지는 원 서버 방향을 인바운드로 하여 송신된다

- 인바운드 : 원래의 서버로 이동하는 방향
- 아웃바운드 : 서버에서의 처리가 끝난 다음 사용자 에이전트로의 방향

### 3.1.2 다운 스트림으로 흐르는 메시지

- 흐름의 방향에서 상위의 요소는 업 스트림, 하위의 요소는 다운 스트림

## 3.2 메시지의 각 부분

- 메시지는 시작 줄, 헤더 블록, 본문으로 구성
- 시작 줄 : 이것이 어떤 메시지인지 서술, 캐리지 리턴(HTTP 명세) 또는 개행 문자로 구분
- 헤더 블록 : 속성, 캐리지 리턴(HTTP 명세) 또는 개행 문자로 구분
- 본문 : 데이터, 비어 있거나 텍스트나 이진 데이터 포함 가능

### 3.2.1 메시지 문법

- 요청 메시지는 웹 서버에 어떤 동작을 요구
```
<메서드> <요청 URL> <버전>
<헤더>

<엔터티 본문>
```

- 응답 메시지를 요청 메시지의 결과를 응답
```
<버전> <상태 코드> <사유 구정>
<헤더>

<엔터티 본문>
```

![img.png](03_http_msg_01.png)

#### 메서드
- 클라이언트 측에서 서버가 리로스에 대해 수행해주길 바라는 동작, GET / HEAD / POST 등

#### 요청 URL
- 요청 되상이 되는 리소스를 지칭하는 완전한 URL

#### 버전
- 메세지에서 사용 중인 HTTP 의 버전, `HTTP/<메이저 버전>.<마이너 버전>`

#### 상태 코드
- 요청 중에 무엇이 일어났는지 설명하는 세 자리의 숫자

#### 사유 구절
- 숫자 상태 코드의 의미를 사람이 이해할 수 있도록 설명해 주는 도구, 프로토콜의 규약에는 상관 없이 사람의 이해를 위해서만 사용

#### 헤더들
- 추후 자세히 다룰 예정

#### 엔터티 본문
- 임의 데이터 블록을 포함 하거니 빈 상태(CRLF)로 전달
- 엔터티 본문이 없어도 헤더 다음에 CRLF 가 있어야 하는 것이 규약

### 3.2.2 시작 줄

##### 요청 줄
- 메서드 / 요청 URL / HTTP 버전이 포함 되며, 공백으로 구분
- `ex) GET /test/hi-there.txt HTTP/1.1`

#### 응답 줄
- HTTP 버전 / 상태 코드 / 사유 구절
- `ex) HTTP/1.0 200 OK`

#### 메서드
- 서버에 무엇을 해야하는지 알려주는 규약
- 단, 서버 별로 구현된 메서드가 다를 수 있으니 주의 필요

| 메서드     | 설명                             | 메시지 본문 |
|:--------|:-------------------------------|:------:|
| GET     | 서버에서 어떤 문서를 가져온다               |   X    |
| HEAD    | 서버에서 어떤 문서에 대한 헤더만 가져온다        |   X    |
| POST    | 서버가 처리해야할 데이터를 보낸다             |   O    |
| PUT     | 서버에 요청 메시지의 본문을 저장한다           |   O    |
| TRACE   | 메시지가 프락시를 거쳐 서버에 도달하는 과정을 추적한다 |   X    |
| OPTIONS | 서버가 어떤 메서드를 수행할 수 있는지 확인한다     |   X    |
| DELETE  | 서버에서 문서를 제거한다                  |   X    |

#### 상태 코드
- 클라이언트에게 서버에서 무엇이 일어났는지 알려주는 3자리 코드

|   전체 범위   |  정의된 범위   |    분류    |
|:---------:|:---------:|:--------:|
| 100 - 199 | 100 - 101 |    정보    |
| 200 - 299 | 200 - 206 |    성공    |
| 300 - 399 | 300 - 305 |  리다이렉션   |
| 400 - 499 | 400 - 415 | 클라이언트 애러 |
| 500 - 599 | 500 - 505 |  서버 에러   |

#### 사유 구절
- 상태 코드를 사람이 이해할 수 있도록 설명한 버전

#### 버전 번호
- HTTP 프로토콜의 버전을 알려주는 역할
- 한 쪽, 버전이 낮을 경우 낮은 버전의 기능을 사용해서만 통신


### 3.2.3 헤더










